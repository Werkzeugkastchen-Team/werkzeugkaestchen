{% extends 'base.html' %}

{% block page_title %}
<h1>{{ toolName }}</h1>
{% endblock %}

{% block content %}

<div class="mb-4">
    <p class="lead text-secondary">{{ description }}</p>

    {% if use_cases %}
    <div class="mt-4">
        <p class="mb-2 fw-semibold">{{ _('Anwendungsfälle:') }}</p>
        <ul class="ps-4 text-dark-emphasis">
            {% for use_case in use_cases %}
            <li class="mb-1">{{ use_case }}</li>
            {% endfor %}
        </ul>
    </div>
    {% endif %}
</div>

<form action="{{ url_for('handle_tool') }}" method="post" enctype="multipart/form-data" id="toolForm">
    <input type="hidden" name="tool_name" value="{{ identifier }}">

    {% set tool_template = "tools/" ~ identifier ~ ".jinja" %}
    {% include tool_template ignore missing %}

    {% for param, param_type in input_params.items() %}
        {% if param != "conversion_type" and param != "timestamp" and param != "date" and param != "time" %}
            <div class="form-group mb-3">
                <label for="{{ param }}">{{ param }}</label>

                {% if param_type == 'string' %}
                    <input type="text" name="{{ param }}" id="{{ param }}" class="form-control">
                {% elif param_type == 'boolean' %}
                    <input type="checkbox" name="{{ param }}" id="{{ param }}">
                {% elif param_type == 'file' %}
                    <input type="file" name="{{ param }}" id="{{ param }}" class="form-control">
                {% elif param_type == 'file[]' %}
                    <input type="file" name="{{ param }}" id="{{ param }}" class="form-control" multiple>
                {% elif param_type.type == 'enum' %}
                    <select name="{{ param }}" id="{{ param }}" class="form-control">
                        {% for option in param_type.options %}
                        <option value="{{ option }}">{{ option }}</option>
                        {% endfor %}
                    </select>
                {% elif param_type.type == 'textarea' %}
                    <textarea name="{{ param }}" id="{{ param }}" class="form-control"></textarea>
                {% else %}
                    <input type="text" name="{{ param }}" id="{{ param }}" class="form-control">
                {% endif %}
            </div>
        {% endif %}
    {% endfor %}

    <input class="fancy-button mt-3" type="submit" value="{{ _('Ausführen') }}" id="submitButton">
</form>
{% endblock %}
